cmake_minimum_required(VERSION 3.5)
project(LabStreamingLayer)

# add the liblsl build directory
add_subdirectory(LSL/liblsl)

# When building the whole tree, we define LSL_INSTALL_ROOT as the current directory.
# In this case we have liblsl as an actual target, so we don't need to find it.
# In all other cases, LSL_INSTALL_ROOT must be set to an actual **installed** lsl root.
set(LSL_INSTALL_ROOT ${CMAKE_CURRENT_LIST_DIR} CACHE STRING
	"LSL root directory, LSL_INSTALL_ROOT/cmake contains modules to set everything up / find liblsl" FORCE)

# When using a precompiled lsl, liblsl is installed as an exported target with
# an autogenerated FindLSL.cmake in LSL_INSTALL_ROOT/cmake so the apps and
# CMake scripts don't care where LSL_INSTALL_ROOT was defined

# include common LSL cmake scripts, e.g. with default settings and functions
list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}/cmake")
include(LSLCMake)

# include the Apps directory which defines options, which Apps will be built
# and includes their build configurations
add_subdirectory(Apps)

# When building the whole tree, no component specific versions can be used
# https://stackoverflow.com/q/44951598/73299
set(CPACK_PACKAGE_VERSION_MAJOR 0)
set(CPACK_PACKAGE_VERSION_MINOR 0)
set(CPACK_PACKAGE_VERSION_PATCH 1)
# Generate packages for LSL and all built apps
LSLGenerateCPackConfig()
